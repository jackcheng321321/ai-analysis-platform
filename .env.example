# AI综合分析管理平台 - 环境变量配置示例
# 复制此文件为 .env 并根据实际情况修改配置值

# ================================
# 基础应用配置
# ================================

# 应用环境 (development, production, testing)
ENVIRONMENT=production

# 应用密钥（用于JWT等加密，生产环境必须更改）
SECRET_KEY=your_very_secret_key_here_change_in_production_min_32_chars

# 数据加密密钥（用于敏感数据加密，必须32字符）
ENCRYPTION_KEY=your_encryption_key_32_chars_long

# 调试模式（生产环境设为false）
DEBUG=false

# 日志级别 (DEBUG, INFO, WARNING, ERROR, CRITICAL)
LOG_LEVEL=INFO

# ================================
# 数据库配置
# ================================

# PostgreSQL配置
POSTGRES_DB=ai_analysis_platform
POSTGRES_USER=postgres
POSTGRES_PASSWORD=your_secure_postgres_password
POSTGRES_HOST=postgres
POSTGRES_PORT=5432

# 数据库连接URL（自动生成，通常不需要修改）
# DATABASE_URL=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:${POSTGRES_PORT}/${POSTGRES_DB}

# ================================
# Redis配置
# ================================

# Redis密码
REDIS_PASSWORD=your_redis_password

# Redis连接URL（自动生成，通常不需要修改）
# REDIS_URL=redis://:${REDIS_PASSWORD}@redis:6379/0

# ================================
# 服务端口配置
# ================================

# 后端API端口
BACKEND_PORT=8000

# 前端Web端口
FRONTEND_PORT=80

# PostgreSQL外部端口
POSTGRES_PORT=5432

# Redis外部端口
REDIS_PORT=6379

# Celery Flower监控端口
FLOWER_PORT=5555

# Nginx端口
NGINX_HTTP_PORT=80
NGINX_HTTPS_PORT=443

# ================================
# Webhook配置
# ================================

# Webhook基础URL（用于生成完整的webhook地址）
WEBHOOK_BASE_URL=https://your-domain.com/api/v1/webhooks

# Webhook速率限制（每分钟请求数）
RATE_LIMIT_PER_MINUTE=60

# ================================
# 文件处理配置
# ================================

# 最大文件大小限制（MB）
MAX_FILE_SIZE_MB=100

# 临时文件目录
TEMP_DIR=/tmp/ai-analysis

# 支持的文件类型（逗号分隔）
SUPPORTED_FILE_TYPES=txt,pdf,docx,xlsx,jpg,png,gif,mp4,mp3

# ================================
# AI模型配置
# ================================

# 默认AI请求超时时间（秒）
DEFAULT_AI_TIMEOUT=300

# 默认重试次数
MAX_RETRIES=3

# 重试延迟（秒）
RETRY_DELAY_SECONDS=60

# Token成本跟踪
TOKEN_COST_TRACKING=true

# ================================
# 安全配置
# ================================

# CORS允许的源（逗号分隔）
CORS_ORIGINS=https://your-domain.com,https://www.your-domain.com

# JWT Token过期时间（小时）
JWT_EXPIRATION_HOURS=24

# 密码最小长度
MIN_PASSWORD_LENGTH=8

# ================================
# 前端配置
# ================================

# 前端API基础URL
VITE_API_BASE_URL=https://your-domain.com/api/v1

# 应用标题
VITE_APP_TITLE=AI综合分析管理平台

# 应用版本
VITE_APP_VERSION=1.0.0

# 是否启用开发模式功能
VITE_DEV_MODE=false

# ================================
# Celery配置
# ================================

# Celery Worker并发数
CELERY_WORKER_CONCURRENCY=4

# Celery任务超时时间（秒）
CELERY_TASK_TIMEOUT=1800

# Celery结果过期时间（秒）
CELERY_RESULT_EXPIRES=3600

# Flower监控认证
FLOWER_USER=admin
FLOWER_PASSWORD=flower_password

# ================================
# 监控配置（可选）
# ================================

# Prometheus端口
PROMETHEUS_PORT=9090

# Grafana配置
GRAFANA_PORT=3000
GRAFANA_USER=admin
GRAFANA_PASSWORD=grafana_password

# ================================
# 邮件配置（用于告警通知）
# ================================

# SMTP服务器配置
SMTP_HOST=smtp.your-email-provider.com
SMTP_PORT=587
SMTP_USER=your-email@company.com
SMTP_PASSWORD=your_email_password
SMTP_USE_TLS=true

# 发件人信息
MAIL_FROM_NAME=AI分析平台
MAIL_FROM_EMAIL=noreply@your-domain.com

# 管理员邮箱（接收告警）
ADMIN_EMAIL=admin@your-domain.com

# ================================
# 飞书配置示例
# ================================

# 飞书应用配置（在任务中单独配置，这里仅作示例）
# FEISHU_APP_ID=cli_xxxxxxxxxx
# FEISHU_APP_SECRET=your_feishu_app_secret
# FEISHU_PROJECT_HOST=https://project.feishu.cn

# ================================
# AI模型API密钥示例
# ================================
# 注意：这些密钥应该在系统配置中加密存储，而不是环境变量
# 这里仅作为配置参考

# OpenAI API密钥
# OPENAI_API_KEY=sk-xxxxxxxxxx

# Moonshot API密钥
# MOONSHOT_API_KEY=sk-xxxxxxxxxx

# 智谱AI API密钥
# ZHIPU_API_KEY=xxxxxxxxxx

# 百度千帆API密钥
# QIANFAN_ACCESS_KEY=xxxxxxxxxx
# QIANFAN_SECRET_KEY=xxxxxxxxxx

# ================================
# 存储凭证示例
# ================================
# 注意：这些凭证应该在系统配置中加密存储，而不是环境变量
# 这里仅作为配置参考

# SMB/CIFS存储
# SMB_USERNAME=your_smb_user
# SMB_PASSWORD=your_smb_password
# SMB_DOMAIN=your_domain

# FTP存储
# FTP_USERNAME=your_ftp_user
# FTP_PASSWORD=your_ftp_password

# ================================
# 开发环境特定配置
# ================================

# 开发环境数据库（仅开发时使用）
# DEV_POSTGRES_PORT=5433
# DEV_REDIS_PORT=6380
# DEV_FRONTEND_PORT=3000

# 开发工具端口
# PGADMIN_PORT=5050
# REDIS_COMMANDER_PORT=8081
# MAILHOG_SMTP_PORT=1025
# MAILHOG_WEB_PORT=8025
# DOCS_PORT=8080

# ================================
# 生产环境优化配置
# ================================

# 数据库连接池大小
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=30

# Redis连接池大小
REDIS_POOL_SIZE=50

# 工作进程数（通常设为CPU核心数）
WORKERS=4

# 每个工作进程的线程数
WORKER_THREADS=1

# 请求超时时间（秒）
REQUEST_TIMEOUT=30

# 保持连接超时时间（秒）
KEEP_ALIVE_TIMEOUT=5

# ================================
# 备份和维护配置
# ================================

# 数据库备份保留天数
BACKUP_RETENTION_DAYS=30

# 日志文件保留天数
LOG_RETENTION_DAYS=7

# 任务执行记录保留天数
TASK_EXECUTION_RETENTION_DAYS=90

# Webhook日志保留天数
WEBHOOK_LOG_RETENTION_DAYS=30

# ================================
# 性能监控配置
# ================================

# 是否启用性能监控
ENABLE_PERFORMANCE_MONITORING=true

# 慢查询阈值（毫秒）
SLOW_QUERY_THRESHOLD_MS=1000

# 是否启用请求追踪
ENABLE_REQUEST_TRACING=true

# 采样率（0.0-1.0）
TRACING_SAMPLE_RATE=0.1

# ================================
# 使用说明
# ================================
# 
# 1. 复制此文件为 .env:
#    cp .env.example .env
# 
# 2. 根据实际环境修改配置值，特别注意：
#    - 更改所有密码和密钥
#    - 设置正确的域名和URL
#    - 配置邮件服务器
#    - 调整性能参数
# 
# 3. 生产环境部署前检查清单：
#    □ SECRET_KEY 已更改
#    □ ENCRYPTION_KEY 已设置（32字符）
#    □ 数据库密码已更改
#    □ Redis密码已设置
#    □ DEBUG 设为 false
#    □ CORS_ORIGINS 设置正确
#    □ WEBHOOK_BASE_URL 设置正确
#    □ 邮件配置已设置
#    □ SSL证书已配置
# 
# 4. 安全提醒：
#    - 不要将 .env 文件提交到版本控制系统
#    - 定期轮换密钥和密码
#    - 使用强密码
#    - 限制数据库和Redis的网络访问
#    - 启用防火墙和访问控制